(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{28:function(t,e,n){},29:function(t,e,n){},38:function(t,e,n){"use strict";n.r(e);var s=n(1),c=n.n(s),r=n(22),i=n.n(r),a=(n(28),n(8)),o=n(9),j=n(11),h=n(10),l=n(4),d=n(2),u=n(19),b=n.n(u),O=(n(29),n(0)),x=function(t){var e=t.user;return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e.id}),Object(O.jsx)("td",{children:e.username}),Object(O.jsx)("td",{children:e.firstName}),Object(O.jsx)("td",{children:e.lastName}),Object(O.jsx)("td",{children:e.email})]})},p=function(t){var e=t.usersList,n=t.previousPage,s=t.nextPage,c=t.load;return Object(O.jsxs)("div",{children:[Object(O.jsxs)("p",{children:[n&&Object(O.jsx)("button",{onClick:function(){return c(n)},children:"previous page"}),s&&Object(O.jsx)("button",{onClick:function(){return c(s)},children:"next page"})]}),Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"ID"}),Object(O.jsx)("th",{children:"Username"}),Object(O.jsx)("th",{children:"First name"}),Object(O.jsx)("th",{children:"Last Name"}),Object(O.jsx)("th",{children:"Email"})]})}),Object(O.jsx)("tbody",{children:e.map((function(t){return Object(O.jsx)(x,{user:t},t.id)}))})]})]})},f=function(t){return Object(O.jsxs)("div",{children:[t.isAuthenticated?"".concat(t.username," | | "):"",t.isAuthenticated?Object(O.jsx)("button",{onClick:function(){return t.logout()},children:"Logout"}):Object(O.jsx)(l.b,{to:"/login",children:"Login"}),Object(O.jsx)("br",{}),Object(O.jsx)(l.b,{to:"/",children:"Users"})," | | ",Object(O.jsx)(l.b,{to:"/projects/",children:"Projects"})," | | ",Object(O.jsx)(l.b,{to:"/todos/",children:"ToDos"}),Object(O.jsx)("hr",{})]})},v=function(){return Object(O.jsx)("h3",{children:"Footer"})},g=function(t){var e=t.toDo,n=t.deactivate;return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e.id}),Object(O.jsx)("td",{children:"".concat(e.creator.firstName," ").concat(e.creator.lastName)}),Object(O.jsx)("td",{children:e.project.name}),Object(O.jsx)("td",{children:e.body}),Object(O.jsx)("td",{children:"".concat(e.isActive)}),e.isActive&&Object(O.jsxs)("td",{children:[Object(O.jsx)(l.b,{to:"/todos/".concat(e.id,"/edit"),children:"Change"})," ",Object(O.jsx)("button",{onClick:function(){return n(e.id)},type:"button",children:"Deactivate"})]})]})},m=function(t){var e=t.toDosList,n=t.previousPage,s=t.nextPage,c=t.load,r=t.deactivate;return Object(O.jsxs)("div",{children:[Object(O.jsxs)("p",{children:[n&&Object(O.jsx)("button",{onClick:function(){return c(n)},children:"previous page"}),s&&Object(O.jsx)("button",{onClick:function(){return c(s)},children:"next page"})]}),Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"ID"}),Object(O.jsx)("th",{children:"Creator"}),Object(O.jsx)("th",{children:"Project"}),Object(O.jsx)("th",{children:"Text"}),Object(O.jsx)("th",{children:"Active"}),Object(O.jsx)("th",{children:"Actions"})]})}),Object(O.jsx)("tbody",{children:e.map((function(t){return Object(O.jsx)(g,{deactivate:r,toDo:t},t.id)}))})]}),Object(O.jsx)(l.b,{to:"/todos/create/",children:"Create"})]})},k=function(t){var e=t.project,n=t.deleteProject;return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e.id}),Object(O.jsx)("td",{children:Object(O.jsx)(l.b,{to:"/projects/".concat(e.id,"/"),children:e.name})}),Object(O.jsx)("td",{children:Object(O.jsx)("button",{onClick:function(){return n(e.id)},type:"button",children:"Delete"})})]})},y=function(t){var e=t.projectsList,n=Object(d.g)().id,s=e.filter((function(t){return t.id===+n}));if(s.length){s=s[0];var c=[];return s.users.forEach((function(t){return c.push("".concat(t.firstName," ").concat(t.lastName))})),Object(O.jsxs)("div",{children:[Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Field"}),Object(O.jsx)("th",{children:"Value"})]})}),Object(O.jsxs)("tbody",{children:[Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:"ID"}),Object(O.jsx)("td",{children:s.id})]}),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:"Name"}),Object(O.jsx)("td",{children:s.name})]}),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:"Git"}),Object(O.jsx)("td",{children:s.gitLink})]}),Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:"Users"}),Object(O.jsx)("td",{children:c.join(", ")})]})]})]}),Object(O.jsx)(l.b,{to:"/projects/".concat(s.id,"/edit"),children:"Edit"})]})}return Object(O.jsxs)("h1",{children:["Page ","/projects/".concat(n,"/")," not found"]})},P=function(t){var e=t.projectsList,n=t.previousPage,s=t.nextPage,c=t.load,r=t.deleteProject,i=t.projectFilter;return Object(O.jsxs)("div",{children:[Object(O.jsxs)("p",{children:["\u0418\u0441\u043a\u0430\u0442\u044c: ",Object(O.jsx)("input",{type:"text",onChange:function(t){return i(t.target.value)}})]}),Object(O.jsxs)("p",{children:[n&&Object(O.jsx)("button",{onClick:function(){return c(n)},children:"previous page"}),s&&Object(O.jsx)("button",{onClick:function(){return c(s)},children:"next page"})]}),Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"ID"}),Object(O.jsx)("th",{children:"Name"}),Object(O.jsx)("th",{children:"Actions"})]})}),Object(O.jsx)("tbody",{children:e.map((function(t){return Object(O.jsx)(k,{project:t,deleteProject:r},t.id)}))})]}),Object(O.jsx)(l.b,{to:"/projects/create/",children:"Create"})]})},L=n(13),U=function(t){Object(j.a)(n,t);var e=Object(h.a)(n);function n(t){var s;return Object(a.a)(this,n),(s=e.call(this,t)).state={username:"",password:""},s}return Object(o.a)(n,[{key:"handleOnChange",value:function(t){this.setState(Object(L.a)({},t.target.name,t.target.value))}},{key:"handleOnSubmit",value:function(t){this.props.getToken(this.state.username,this.state.password),t.preventDefault()}},{key:"render",value:function(){var t=this;return Object(O.jsx)("div",{children:Object(O.jsxs)("form",{onSubmit:function(e){return t.handleOnSubmit(e)},children:[Object(O.jsx)("input",{type:"text",name:"username",placeholder:"username",value:this.state.login,onChange:function(e){return t.handleOnChange(e)}}),Object(O.jsx)("input",{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:function(e){return t.handleOnChange(e)}}),Object(O.jsx)("input",{type:"submit",value:"login"})]})})}}]),n}(c.a.Component),T=function(t){Object(j.a)(n,t);var e=Object(h.a)(n);function n(t){var s;Object(a.a)(this,n),s=e.call(this,t);var c=+t.match.params.id;if(c){var r=t.allToDos.filter((function(t){return t.id===c})),i=r.length>0?r[0]:{};s.state={id:i.id,creator:i.creator,project:i.project.id,body:i.body}}else{var o=t.allUsers.filter((function(e){return e.username===t.username}))[0]||{};s.state={id:null,creator:o,project:t.allProjects.length>0?t.allProjects[0].id:null,body:""}}return s}return Object(o.a)(n,[{key:"handleChange",value:function(t){this.setState(Object(L.a)({},t.target.name,t.target.value))}},{key:"handleSubmit",value:function(t){t.preventDefault(),this.props.createUpdateToDo(this.state.id,this.state.creator.id,+this.state.project,this.state.body)}},{key:"render",value:function(){var t=this;return Object(O.jsxs)("form",{onSubmit:function(e){return t.handleSubmit(e)},children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:"Creator: "}),Object(O.jsxs)("span",{children:[this.state.creator.firstName," ",this.state.creator.lastName]})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:"Project"}),Object(O.jsx)("select",{name:"project",onChange:function(e){return t.handleChange(e)},children:this.props.allProjects.map((function(e){return+t.state.project===+e.id?Object(O.jsx)("option",{selected:!0,value:e.id,children:e.name},e.id):Object(O.jsx)("option",{value:e.id,children:e.name},e.id)}))})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:"Body"}),Object(O.jsx)("input",{required:!0,type:"text",name:"body",value:this.state.body,onChange:function(e){return t.handleChange(e)}})]}),Object(O.jsx)("input",{type:"submit",value:"Save"})]})}}]),n}(c.a.Component),D=Object(d.h)(T),C=function(t){Object(j.a)(n,t);var e=Object(h.a)(n);function n(t){var s;Object(a.a)(this,n),s=e.call(this,t);var c=+t.match.params.id;if(c){var r=t.allProjects.filter((function(t){return t.id===c})),i=r.length>0?r[0]:{users:[]},o=i.users.map((function(t){return t.id}));console.log(o),s.state={id:i.id,name:i.name,gitLink:i.gitLink,users:o}}else s.state={id:null,name:"",gitLink:"",users:[]};return s}return Object(o.a)(n,[{key:"handleChange",value:function(t){this.setState(Object(L.a)({},t.target.name,t.target.value))}},{key:"handleUsersChange",value:function(t){var e=t.target.selectedOptions;if(e){for(var n=[],s=0;s<e.length;s++)n.push(+e.item(s).value);this.setState({users:n})}}},{key:"handleSubmit",value:function(t){t.preventDefault(),this.props.createUpdateProject(this.state.id,this.state.name,this.state.gitLink,this.state.users)}},{key:"render",value:function(){var t=this;return Object(O.jsxs)("form",{onSubmit:function(e){return t.handleSubmit(e)},children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:"Name"}),Object(O.jsx)("input",{required:!0,type:"text",name:"name",value:this.state.name,onChange:function(e){return t.handleChange(e)}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:"Git link"}),Object(O.jsx)("input",{type:"url",name:"gitLink",value:this.state.gitLink,onChange:function(e){return t.handleChange(e)}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{children:"Users"}),Object(O.jsx)("select",{multiple:!0,required:!0,name:"users",onChange:function(e){return t.handleUsersChange(e)},children:this.props.allUsers.map((function(e){return t.state.users.length>0&&t.state.users.includes(e.id)?Object(O.jsx)("option",{selected:!0,value:e.id,children:"".concat(e.firstName," ").concat(e.lastName)},e.id):Object(O.jsx)("option",{value:e.id,children:"".concat(e.firstName," ").concat(e.lastName)},e.id)}))})]}),Object(O.jsx)("input",{type:"submit",value:"Save"})]})}}]),n}(c.a.Component),S=Object(d.h)(C),N="http://".concat("127.0.0.1",":8000/api"),A=function(t){var e=t.path;return Object(O.jsxs)("h1",{children:["Page '",e.pathname,"' not found"]})},E=function(t){Object(j.a)(n,t);var e=Object(h.a)(n);function n(t){var s;return Object(a.a)(this,n),(s=e.call(this,t)).state={token:"",username:"",isAuthenticated:!1,previousUsersUrl:null,nextUsersUrl:null,usersList:[],previousProjectsUrl:null,nextProjectsUrl:null,projectsList:[],filteredProjectsList:[],previousToDosUrl:null,nextToDosUrl:null,toDoList:[]},s}return Object(o.a)(n,[{key:"setToken",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=new b.a;n.set("token",t),n.set("username",e),""!==t?this.setState({token:t,isAuthenticated:!0}):this.setState({token:t,isAuthenticated:!1}),this.getStorageToken()}},{key:"logout",value:function(){this.setToken("")}},{key:"getStorageToken",value:function(){var t=this,e=new b.a,n=e.get("token"),s=e.get("username");""!==n?this.setState({token:n,username:s,isAuthenticated:!0},(function(){t.loadProjects("".concat(N,"/projects/")),t.loadUsers("".concat(N,"/users/")),t.loadToDo("".concat(N,"/todo/"))})):this.setState({token:n,username:"",isAuthenticated:!1})}},{key:"getToken",value:function(t,e){var n=this;fetch("".concat(N,"/jwt/"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({username:t,password:e})}).then((function(t){return t.json()})).then((function(e){n.setToken(e.access,t)})).catch((function(t){return console.log(t)}))}},{key:"getHeaders",value:function(){var t={"Content-Type":"application/json;charset=utf-8","X-Requested-With":"XMLHttpRequest"};return this.state.isAuthenticated&&(t.Authorization="Bearer ".concat(this.state.token)),t}},{key:"loadUsers",value:function(t){var e=this,n=this.getHeaders();fetch("".concat(t),{method:"GET",headers:n}).then((function(t){return t.json()})).then((function(t){t.detail?e.logout():e.setState({usersList:t})})).catch((function(t){return console.log(t)}))}},{key:"loadToDo",value:function(t){var e=this,n=this.getHeaders();fetch("".concat(t),{method:"GET",headers:n}).then((function(t){return t.json()})).then((function(t){if(t.results){var n=t.results,s=t.previous,c=t.next;e.setState({previousToDosUrl:s,nextToDosUrl:c,toDoList:n})}else e.logout()})).catch((function(t){return console.log(t)}))}},{key:"createUpdateToDo",value:function(t,e,n,s){var c=this,r=this.getHeaders(),i="POST",a="";t&&(i="PUT",a="".concat(t,"/")),fetch("".concat(N,"/todo/").concat(a),{method:i,headers:r,body:JSON.stringify({creator:e,project:n,body:s})}).then((function(){return c.getStorageToken()})).catch((function(t){return console.log(t)}))}},{key:"deactivateToDo",value:function(t){var e=this,n=this.getHeaders();fetch("".concat(N,"/todo/").concat(t,"/"),{method:"DELETE",headers:n}).then((function(){var n=e.state.toDoList;n=n.map((function(e){return e.id===+t&&(e.isActive=!1),e})),e.setState({toDoList:n})})).catch((function(t){return console.log(t)}))}},{key:"loadProjects",value:function(t){var e=this,n=this.getHeaders();fetch("".concat(t),{method:"GET",headers:n}).then((function(t){return t.json()})).then((function(t){t.detail?e.logout():e.setState({projectsList:t,filteredProjectsList:t})})).catch((function(t){return console.log(t)}))}},{key:"projectFilter",value:function(t){var e=new RegExp(t,"i"),n=""===t?this.state.projectsList:this.state.projectsList.filter((function(t){return t.name.match(e)}));this.setState({filteredProjectsList:n})}},{key:"createUpdateProject",value:function(t,e,n,s){var c=this,r=this.getHeaders(),i="POST",a="";t&&(i="PUT",a="".concat(t,"/")),fetch("".concat(N,"/projects/").concat(a),{method:i,headers:r,body:JSON.stringify({name:e,gitLink:n,users:s})}).then((function(){return c.getStorageToken()})).catch((function(t){return console.log(t)}))}},{key:"deleteProject",value:function(t){var e=this,n=this.getHeaders();fetch("".concat(N,"/projects/").concat(t,"/"),{method:"DELETE",headers:n}).then((function(){e.setState({projectsList:e.state.projectsList.filter((function(e){return e.id!==t}))})})).catch((function(t){return console.log(t)}))}},{key:"componentDidMount",value:function(){this.getStorageToken()}},{key:"render",value:function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsxs)(l.a,{children:[Object(O.jsx)(f,{username:this.state.username,isAuthenticated:this.state.isAuthenticated,logout:this.logout.bind(this)}),Object(O.jsxs)(d.d,{children:[Object(O.jsx)(d.b,{exact:!0,path:"/",children:Object(O.jsx)(p,{usersList:this.state.usersList,nextPage:this.state.nextUsersUrl,previousPage:this.state.previousUsersUrl,load:this.loadUsers.bind(this)})}),Object(O.jsx)(d.b,{exact:!0,path:"/login",children:Object(O.jsx)(U,{getToken:this.getToken.bind(this)})}),Object(O.jsx)(d.b,{exact:!0,path:"/todos",children:Object(O.jsx)(m,{toDosList:this.state.toDoList,nextPage:this.state.nextToDosUrl,previousPage:this.state.previousToDosUrl,load:this.loadToDo.bind(this),deactivate:this.deactivateToDo.bind(this)})}),Object(O.jsx)(d.b,{exact:!0,path:"/projects/:id/edit",children:Object(O.jsx)(S,{allUsers:this.state.usersList,allProjects:this.state.projectsList,createUpdateProject:this.createUpdateProject.bind(this)})}),Object(O.jsx)(d.b,{exact:!0,path:"/todos/create",children:Object(O.jsx)(D,{allProjects:this.state.projectsList,allUsers:this.state.usersList,username:this.state.username,createUpdateToDo:this.createUpdateToDo.bind(this)})}),Object(O.jsx)(d.b,{exact:!0,path:"/todos/:id/edit",children:Object(O.jsx)(D,{allUsers:this.state.usersList,allToDos:this.state.toDoList,allProjects:this.state.projectsList,username:this.state.username,createUpdateToDo:this.createUpdateToDo.bind(this)})}),Object(O.jsx)(d.b,{exact:!0,path:"/projects",children:Object(O.jsx)(P,{projectsList:this.state.filteredProjectsList,nextPage:this.state.nextProjectsUrl,previousPage:this.state.previousProjectsUrl,load:this.loadProjects.bind(this),deleteProject:this.deleteProject.bind(this),projectFilter:this.projectFilter.bind(this)})}),Object(O.jsx)(d.b,{exact:!0,path:"/projects/create",children:Object(O.jsx)(S,{allUsers:this.state.usersList,createUpdateProject:this.createUpdateProject.bind(this)})}),Object(O.jsx)(d.b,{exact:!0,path:"/projects/:id/edit",children:Object(O.jsx)(S,{allUsers:this.state.usersList,allProjects:this.state.projectsList,createUpdateProject:this.createUpdateProject.bind(this)})}),Object(O.jsx)(d.b,{exact:!0,path:"/projects/:id",children:Object(O.jsx)(y,{projectsList:this.state.projectsList})}),Object(O.jsx)(d.a,{from:"/users",to:"/"}),Object(O.jsx)(d.b,{component:A})]}),Object(O.jsx)(v,{})]})})}}]),n}(c.a.Component),w=E,F=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(e){var n=e.getCLS,s=e.getFID,c=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),s(t),c(t),r(t),i(t)}))};i.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(w,{})}),document.getElementById("root")),F()}},[[38,1,2]]]);
//# sourceMappingURL=main.c982b479.chunk.js.map